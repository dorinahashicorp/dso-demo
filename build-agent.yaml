apiVersion: v1
kind: Pod
metadata:
  labels:
    app: spring-build-ci
spec:
  containers:
    - name: maven
      image: maven:alpine
      command: ["cat"]
      tty: true
      volumeMounts:
        - name: m2
          mountPath: /root/.m2/
    - name: ruby
      image: ruby:latest
      command: ["sleep"]
      args: ["infinity"]  # Keeps the container running
    - name: kaniko
      image: gcr.io/kaniko-project/executor:v1.6.0-debug
      imagePullPolicy: Always
      command: ["sleep"]
      args: ["99d"]
      env:
        - name: container
          value: docker
      volumeMounts:
        - name: jenkins-docker-cfg
          mountPath: /kaniko/.docker
  volumes:
    - name: m2
      hostPath:
        path: /tmp/.m2/
